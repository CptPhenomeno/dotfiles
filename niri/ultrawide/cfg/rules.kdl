// ════════════════════════════════════════════════════════════════════
// Niri Window Rules - Application-Specific Configuration
// ════════════════════════════════════════════════════════════════════
// Replace your existing rules.kdl with this enhanced version

// ─── Global Window Appearance ───
window-rule {
    // Beautiful rounded corners for all windows
    geometry-corner-radius 12       // Reduce from 20px to 12px for better readability on ultrawide
    clip-to-geometry true           // Ensure window content respects corners
}

// ─── Noctalia Wallpaper ───
layer-rule {
    match namespace="^noctalia-wallpaper*"
    place-within-backdrop true      // Wallpaper stays behind windows
}

// ─── Development Tools ───

// Code editor (GoLand, VS Code, Cursor): Open in half-screen layout
window-rule {
    match app-id="^jetbrains-goland"
    match app-id="^jetbrains-idea"
    match app-id="^code"
    match app-id="^cursor"
    open-floating false             // Tile by default
    default-column-width { proportion 0.5; }
}

// Terminal: Narrow columns for docking on sides
window-rule {
    match app-id=r"ghostty"
    open-floating false
    default-column-width { proportion 0.4; }
}

// ─── Browser ───
window-rule {
    match app-id=r"vivaldi"
    open-floating false
    default-column-width { proportion 0.6; }  // Browser benefits from more width
}

// ─── Communication ───

// Slack: Compact sidebar + chat
window-rule {
    match app-id="^slack$"
    open-floating false
    default-column-width { proportion 0.33; }
}

// Discord: Similar to Slack
window-rule {
    match app-id="^discord$"
    open-floating false
    default-column-width { proportion 0.33; }
}

// ─── File Manager ───
window-rule {
    match app-id="^nautilus$"
    match app-id="^nemo$"
    open-floating false
    default-column-width { proportion 0.3; }
}

// ─── Utilities & Dialogs ───

// Floating utilities (dialogs, settings, preferences)
window-rule {
    match title="Preferences"
    match title="Settings"
    match title="About"
    match title="Save"
    match title="Open"
    open-floating true              // Always float dialogs
}

// ─── Video/Media ───
window-rule {
    match app-id="^mpv"
    match app-id="^vlc"
    open-floating false
    default-column-width { proportion 0.67; }  // 2/3 width for comfort
}

// ─── PDF Readers ───
window-rule {
    match app-id="^org.gnome.Papers$"
    match app-id="^mupdf"
    open-floating false
    default-column-width { proportion 0.5; }   // Half-screen reading
}

// ─── Floating Window Presets for Quick Access ───
// When you want certain apps to always float (e.g., system monitor)

// Music player widget (if floating)
window-rule {
    match app-id="^playerctl"
    match app-id="^cava"
    open-floating true
}

// ─── Fullscreen Applications ───
// OBS, screen recording tools
window-rule {
    match app-id="^com.obsproject.Studio"
    open-floating false
    default-column-width { proportion 1.0; }
}
